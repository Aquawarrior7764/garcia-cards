<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Redirecting...</title>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const params = new URLSearchParams(window.location.search);
      const cardId = params.get("card");

      if (cardId) {
        // Retrieve existing collection or start fresh
        const saved = JSON.parse(localStorage.getItem("scannedCards")) || [];
        const updated = new Set(saved);
        updated.add(cardId);

        // Save back to localStorage
        localStorage.setItem("scannedCards", JSON.stringify([...updated]));

        // Redirect to main page with card parameter
        window.location.href = `https://garciacards.net/?card=${cardId}`;
      } else {
        window.location.href = "https://garciacards.net";
      }
    });
  </script>
</head>
<body>
  <p>Redirecting...</p>
</body>
</html>